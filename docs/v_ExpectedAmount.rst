.. _v_ExpectedAmount:

v_ExpectedAmount
================

Змінна містить собі очікувану вартість процедури закупівлі.

**Формат:**  Число.

**Рівень розрахунку:** Процедура закупівлі

**Частота розрахунку:** Змінна розраховується один раз 

Дані, що використовуються для розрахунку
----------------------------------------

Для розрахунку використовуються:

* - API тендерінгу системи публічних закупівель
* - `API курсу валют Національного Банку України <https://bank.gov.ua/control/uk/publish/article?art_id=38441973#exchange>`_
* - :ref:`v_DateCreated`


Поля для розрахунку:

Для розрахунку індикатора використовуються наступні поля з API модуля тендеринга для типів дпроцедур які досліджуються:
- ``data.value.amount``
- ``data.value.currency``

Для розрахунку індикатора використовуються наступні поля з API курсу валют Національного Банку України:
- ``cc``
- ``rate``
- ``exchangedate``

Формула розрахунку
------------------
1. Перевіряється валюта, в якій вказана очікувана вартість процедури відповідно до поля ``data.value.currency``.
2. Якщо очікувана вартість вказана в гривні, тобто ``data.value.currency = 'UAH'``, то вона залишається без змін. 
3. Якщо очікувана вартість вказана не в гривні, то вона переводиться у гривню відповідно до курсу даної валюти до гривні за допомогою API курсу валют на дату :ref:`v_DateCreated`.


